def solution(X, A):
    minimum = 0
    maximum = 0
    counter = [0]*(X+1)
    for val in A:
        if val <= X:
            # align with the minimum
            if counter[val] < minimum:
                counter[val] = minimum
            # now increment it
            counter[val] += 1
            # update the maximum
            if counter[val] > maximum:
                maximum = counter[val]
        else:
            # an update-all instruction resets the minimum
            minimum = maximum
    for key, value in enumerate(counter):
        if value < minimum:
            counter[key] = minimum
            
    return counter[1:]
